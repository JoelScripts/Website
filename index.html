<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flying With Joel - Flight Sim Setup</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- Navigation Header -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">flywithjoel</div>
            <button class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <ul class="nav-links" id="nav-links">
                <li><a href="#schedule">Schedule</a></li>
                <li><a href="#highlights">Highlights</a></li>
                <li><a href="#setup">My Setup</a></li>
                <li><a href="#affiliates">Affiliates</a></li>
                <li><a href="#contact">Contact Me</a></li>
                <li><a href="https://www.twitch.tv/Flyingwithjoel" target="_blank" class="follow-btn">Follow Me</a></li>
            </ul>
        </div>
    </nav>

    <!-- Next Stream Banner -->
    <div id="next-stream-banner" class="next-stream-banner" style="display: none;">
        <div class="next-stream-content">
            <span class="live-indicator">üî¥ NEXT STREAM</span>
            <h3 id="next-stream-title">Microsoft Flight Simulator 2024</h3>
            <p id="next-stream-time">Thursday at 3:30 PM GMT</p>
            <a href="https://www.twitch.tv/Flyingwithjoel" target="_blank" class="notify-btn">Notify Me</a>
        </div>
    </div>

    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <div class="live-badge" id="live-badge" style="display: flex;">‚óè Live on Twitch</div>
            <h1>Flying With Joel</h1>
            <p>Welcome to my flight simulation channel! Join me as I explore the skies in Microsoft Flight Simulator 2024 and X-Plane 12. From scenic flights to challenging approaches, we'll experience aviation together.</p>
            <a href="https://linktr.ee/AviationJoel" target="_blank" class="cta-btn">
                <span class="icon">‚Üó</span> Connect With Me
            </a>
            <div class="stats">
                <div class="stat-box">
                    <span class="stat-icon">üë•</span>
                    <div>
                        <span class="stat-number" id="follower-count">478</span>
                        <span class="stat-label">Twitch Followers</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="hero-image">
            <img src="assets/hero-plane.jpg" alt="Flight Simulator">
        </div>
    </section>

    <!-- Upcoming Streams Section -->
    <section id="schedule" class="upcoming-section">
        <div class="schedule-header">
            <div class="schedule-icon">üìÖ</div>
            <div>
                <h2>7 Day Schedule</h2>
                <p class="schedule-subtitle">Check out when I'm taking off next.<br>Times are in UTC.</p>
            </div>
        </div>
        <div class="weekly-schedule" id="weekly-schedule">
            <p style="grid-column: 1 / -1; text-align: center; color: var(--text-muted);">Loading schedule...</p>
        </div>
    </section>

    <!-- Highlights Section -->
    <section id="highlights" class="highlights-section">
        <h2>Recent Highlights</h2>
        <p class="section-subtitle">Check out the best moments from recent streams</p>
        <div class="highlights-grid" id="highlights-grid">
            <!-- Highlights will be loaded here by JavaScript -->
            <p style="grid-column: 1 / -1; text-align: center; color: var(--text-muted);">Loading highlights...</p>
        </div>
    </section>

    <!-- My Setup Section -->
    <section id="setup" class="setup-section">
        <h2>My Setup</h2>
        <p class="section-subtitle">Explore my sim configuration and hardware</p>

        <!-- Tab Navigation -->
        <div class="tabs-container">
            <button class="tab-btn active" data-tab="sim-settings">
                <span class="icon">‚öôÔ∏è</span> Sim Settings
            </button>
            <button class="tab-btn" data-tab="addons">
                <span class="icon">üéÅ</span> Addons
            </button>
            <button class="tab-btn" data-tab="graphics">
                <span class="icon">üì∫</span> Graphics
            </button>
        </div>

        <!-- Tab Content -->
        <div class="tabs-content">
            <!-- Sim Settings Tab -->
            <div id="sim-settings" class="tab-content active">
                <div class="content-grid">
                    <div class="card">
                        <h3>üíª PC Specifications</h3>
                        <div class="specs-list">
                            <div class="spec-row">
                                <span class="spec-label">Cpu:</span>
                                <span class="spec-value">Intel Core i7 14700KF</span>
                            </div>
                            <div class="spec-row">
                                <span class="spec-label">Gpu:</span>
                                <span class="spec-value">NVIDIA RTX 4080 Super 16GB</span>
                            </div>
                            <div class="spec-row">
                                <span class="spec-label">Ram:</span>
                                <span class="spec-value">64GB DDR5-6000</span>
                            </div>
                            <div class="spec-row">
                                <span class="spec-label">Storage:</span>
                                <span class="spec-value">3TB NVMe SSD</span>
                            </div>
                            <div class="spec-row">
                                <span class="spec-label">Monitor:</span>
                                <span class="spec-value">MSI 27" inch 4K Monitor</span>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>üõ©Ô∏è Microsoft Flight Simulator 2024</h3>
                        <div class="sim-settings">
                            <div class="setting-group">
                                <span class="setting-label">Flight Model</span>
                                <span class="setting-value">Modern</span>
                            </div>
                            <div class="setting-group">
                                <span class="setting-label">Assistance Preset</span>
                                <span class="setting-value">Hard</span>
                            </div>
                            <div class="setting-group">
                                <span class="setting-label">Control Settings</span>
                                <ul class="control-list">
                                    <li>Joystick: Thrustmaster T.16000M</li>
                                    <li>Rudder: Thrustmaster TFRP</li>
                                    <li>Throttle: Thrustmaster TWCS</li>
                                    <li>Sensitivity: Medium</li>
                                </ul>
                            </div>
                            <div class="setting-group">
                                <span class="setting-label">Realism Settings</span>
                                <div class="tag-group">
                                    <span class="tag">turbulence</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>‚úàÔ∏è X-Plane 12</h3>
                        <div class="sim-settings">
                            <div class="setting-group">
                                <span class="setting-label">Flight Model</span>
                                <span class="setting-value">High Fidelity</span>
                            </div>
                            <div class="setting-group">
                                <span class="setting-label">Weather Engine</span>
                                <span class="setting-value">Real Weather Connector</span>
                            </div>
                            <div class="setting-group">
                                <span class="setting-label">Control Settings</span>
                                <ul class="control-list">
                                    <li>Joystick: Thrustmaster T.16000M</li>
                                    <li>Rudder: Thrustmaster TFRP</li>
                                    <li>Throttle: Thrustmaster TWCS</li>
                                    <li>Response: 80%</li>
                                </ul>
                            </div>
                            <div class="setting-group">
                                <span class="setting-label">Physics Settings</span>
                                <div class="tag-group">
                                    <span class="tag">true</span>
                                    <span class="tag">Realistic</span>
                                    <span class="tag">High Detail</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="performance-tips-card">
                    <h3>üí° Performance Tips</h3>
                    <ul class="tips-list">
                        <li>Use NVIDIA DLSS if available for better performance</li>
                        <li>Limit terrain detail pre-caching to 100 miles for smooth FPS</li>
                        <li>Disable rolling cache if experiencing stutters</li>
                        <li>Use High instead of Ultra for clouds if FPS drops below 40</li>
                        <li>Keep GPU drivers updated for optimal performance</li>
                    </ul>
                </div>
            </div>

            <!-- Addons Tab -->
            <div id="addons" class="tab-content">
                <div class="content-grid">
                    <div class="card">
                        <h3>‚úàÔ∏è Aircraft</h3>
                        <div class="addon-list">
                            <a href="https://www.pmdg.com/" target="_blank" class="addon-item addon-link">
                                <span class="addon-name">PMDG 737-800</span>
                                <span class="addon-info">MSFS 2024 ‚Ä¢ Study-level Airliner</span>
                            </a>

                            <a href="https://www.fenixsim.com/" target="_blank" class="addon-item addon-link">
                                <span class="addon-name">Fenix A320</span>
                                <span class="addon-info">MSFS 2024 ‚Ä¢ Study-level Airliner</span>
                            </a>

                            <a href="https://inibuilds.com/products/inibuilds-a350-airliner-msfs-2024" target="_blank" class="addon-item addon-link">
                                <span class="addon-name">Inibuilds A350</span>
                                <span class="addon-info">MSFS 2024 ‚Ä¢ High Fidelity Airliner</span>
                            </a>

                            <a href="https://inibuilds.com/products/inibuilds-a340-airliner-msfs-2024" target="_blank" class="addon-item addon-link">
                                <span class="addon-name">inibuilds A340 Airliner</span>
                                <span class="addon-info">MSFS 2024 ‚Ä¢ High Fidelity Airliner</span>
                            </a>

                                 <a href="https://inibuilds.com/products/tfdi-design-md-11-msfs" target="_blank" class="addon-item addon-link">
                                <span class="addon-name">TFDI Design MD-11</span>
                                <span class="addon-info">MSFS 2024 ‚Ä¢ High Fidelity Airliner</span>
                            </a>

                            
                            <!-- Add new aircraft addons below this line -->
                        </div>
                    </div>

                    <div class="card">
                        <h3>üåç Scenery</h3>
                        <div class="addon-list">

                            <a href="LINK HERE" target="_blank" class="addon-item addon-link">
                                <span class="addon-name">Soon to be Updated</span>
                                <span class="addon-info">Soon to be Updated</span>
                            </a>

                            <!-- Add new scenery addons below this line -->
                        </div>
                    </div>

                    <div class="card">
                        <h3>üõ†Ô∏è Utilities</h3>
                        <div class="addon-list">
                            <a href="https://www.littlenavmap.org/" target="_blank" class="addon-item addon-link">
                                <span class="addon-name">Little Navmap</span>
                                <span class="addon-info">Flight Planning & Navigation</span>
                            </a>

                            <a href="https://www.vatsim.net/" target="_blank" class="addon-item addon-link">
                                <span class="addon-name">VATSIM vPilot</span>
                                <span class="addon-info">Online Flying Network</span>
                            </a>

                            <a href="https://www.simbrief.com/" target="_blank" class="addon-item addon-link">
                                <span class="addon-name">SimBrief</span>
                                <span class="addon-info">Flight Plan Generator</span>
                            </a>

                            <a href="https://skyvector.com/" target="_blank" class="addon-item addon-link">
                                <span class="addon-name">SkyVector</span>
                                <span class="addon-info">Aviation Charts</span>
                            </a>

                              <a href="https://navigraph.com" target="_blank" class="addon-item addon-link">
                                <span class="addon-name">Navigraph Charts</span>
                                <span class="addon-info">Aviation Charts</span>
                            </a>

                            <!-- Add new utility addons below this line -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Graphics Tab -->
            <div id="graphics" class="tab-content">
                <div class="content-grid">
                    <div class="card">
                        <h3>üéÆ MSFS 2024 Graphics</h3>
                        <div class="graphics-settings">
                            <div class="setting-group">
                                <span class="setting-label">Preset</span>
                                <span class="setting-value">Custom High-Ultra Mix</span>
                            </div>
                            <div class="setting-group">
                                <span class="setting-label">Render Scale</span>
                                <span class="setting-value">100%</span>
                            </div>
                            <div class="setting-group">
                                <span class="setting-label">Key Settings</span>
                                <div class="tag-group">
                                    <span class="tag">Clouds: Ultra</span>
                                    <span class="tag">Terrain: Ultra</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <h3>üéÆ X-Plane 12 Graphics</h3>
                        <div class="graphics-settings">
                            <div class="setting-group">
                                <span class="setting-label">Preset</span>
                                <span class="setting-value">Custom High</span>
                            </div>
                            <div class="setting-group">
                                <span class="setting-label">Texture Quality</span>
                                <span class="setting-value">Maximum</span>
                            </div>
                            <div class="setting-group">
                                <span class="setting-label">Key Settings</span>
                                <div class="tag-group">
                                    <span class="tag">AA: 4x SSAA</span>
                                    <span class="tag">VFX: Maximum</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Affiliates Section -->
    <section id="affiliates" class="affiliates-section">
        <h2>Affiliate Partners</h2>
        <p class="section-subtitle">Companies and products I recommend and use</p>
        <div class="affiliates-grid">
            <!-- Affiliate Template - Copy this entire div to add more -->
            <div class="affiliate-card">
                <div class="affiliate-header">
                    <h3>NONE YET</h3>
                    <span class="affiliate-badge">Soom‚Ñ¢Ô∏è</span>
                </div>
                <p class="affiliate-description">Soon‚Ñ¢Ô∏è</p>
                <a href="LINK HERE" target="_blank" class="affiliate-btn">Shop Now</a>
            </div>

            <!-- Add more affiliate cards below this line -->
            <!-- Copy and paste the template above, then update: h3 (company name), affiliate-badge (category), affiliate-description (description), and href (link) -->

        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact-section">
        <h2>Contact Me</h2>
        <p class="section-subtitle">Get in touch for business enquiries</p>
        <div class="contact-container">
            <div class="contact-card">
                <h3>üìß Business Enquiries</h3>
                <p>For sponsorships, collaborations, and business opportunities:</p>
                <a href="mailto:flywithjoeluk@gmail.com" class="contact-email">flywithjoeluk@gmail.com</a>
                <p class="contact-note">I'll get back to you as soon as possible!</p>
            </div>
            <div class="contact-card">
                <h3>üé• Connect on Twitch</h3>
                <p>Chat with me live during streams and join the community:</p>
                <a href="https://www.twitch.tv/Flyingwithjoel" target="_blank" class="contact-link">Visit My Twitch Channel</a>
            </div>
        </div>
    </section>

    <script src="js/main.js"></script>
    <script>
        // Hamburger Menu Toggle
        const hamburger = document.getElementById('hamburger');
        const navLinks = document.getElementById('nav-links');

        hamburger.addEventListener('click', () => {
            hamburger.classList.toggle('active');
            navLinks.classList.toggle('active');
        });

        // Close menu when a link is clicked
        const navItems = navLinks.querySelectorAll('a');
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                hamburger.classList.remove('active');
                navLinks.classList.remove('active');
            });
        });

        // API Configuration
        const TWITCH_CHANNEL_NAME = 'Flyingwithjoel';
        const API_BASE_URL = 'https://website-cji.onrender.com/api'; // Backend deployed on Render

        async function checkLiveStatus() {
            try {
                const response = await fetch(`${API_BASE_URL}/live-status`);
                if (!response.ok) throw new Error('Failed to fetch stream status');
                const data = await response.json();
                
                // Show badge only if streaming
                document.getElementById('live-badge').style.display = data.isLive ? 'flex' : 'none';
            } catch (error) {
                console.log('Could not check live status:', error);
                document.getElementById('live-badge').style.display = 'none';
            }
        }

        async function updateFollowerCount() {
            try {
                const response = await fetch(`${API_BASE_URL}/followers`);
                if (!response.ok) throw new Error('Failed to fetch followers');
                const data = await response.json();
                
                // Format the number with commas
                const formattedCount = data.followerCount.toLocaleString();
                document.getElementById('follower-count').textContent = formattedCount;
            } catch (error) {
                console.log('Could not fetch live follower count:', error);
            }
        }

        // Update follower count on page load
        window.addEventListener('load', updateFollowerCount);
        // Update every 5 minutes
        setInterval(updateFollowerCount, 5 * 60 * 1000);

        // Check live status on page load
        window.addEventListener('load', checkLiveStatus);
        // Check every 30 seconds for real-time updates
        setInterval(checkLiveStatus, 30 * 1000);

        async function loadHighlights() {
            try {
                // Create simple cards linking to Twitch clips
                const highlightsHTML = `
                    <div class="highlight-card" style="cursor: pointer;" onclick="window.open('https://www.twitch.tv/${TWITCH_CHANNEL_NAME}/clips', '_blank')">
                        <div class="highlight-thumbnail" style="display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, var(--primary), var(--secondary)); position: relative;">
                            <span style="font-size: 3rem;">üé¨</span>
                        </div>
                        <h4>Watch Your Latest Clips</h4>
                        <span class="view-count">üëÅÔ∏è View all clips on Twitch</span>
                    </div>
                    <div class="highlight-card" style="cursor: pointer;" onclick="window.open('https://www.twitch.tv/${TWITCH_CHANNEL_NAME}/videos', '_blank')">
                        <div class="highlight-thumbnail" style="display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, var(--secondary), #FF2C5A); position: relative;">
                            <span style="font-size: 3rem;">üìπ</span>
                        </div>
                        <h4>Best Moments from Streams</h4>
                        <span class="view-count">üëÅÔ∏è View all videos</span>
                    </div>
                    <div class="highlight-card" style="cursor: pointer;" onclick="window.open('https://www.twitch.tv/${TWITCH_CHANNEL_NAME}', '_blank')">
                        <div class="highlight-thumbnail" style="display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #9147ff, #5D29FF); position: relative;">
                            <span style="font-size: 3rem;">üì∫</span>
                        </div>
                        <h4>Follow on Twitch</h4>
                        <span class="view-count">üëÅÔ∏è Join the community</span>
                    </div>
                `;
                document.getElementById('highlights-grid').innerHTML = highlightsHTML;
            } catch (error) {
                console.error('Could not load highlights:', error);
            }
        }

        // Load highlights on page load
        const originalLoad = window.onload;
        window.addEventListener('load', loadHighlights);
        // Refresh highlights every 10 minutes for new random selection
        setInterval(loadHighlights, 10 * 60 * 1000);

        async function loadUpcomingStreams() {
            try {
                const response = await fetch(`${API_BASE_URL}/schedule`);
                if (!response.ok) throw new Error('Failed to fetch schedule');
                const scheduleData = await response.json();
                const streams = scheduleData.data.segments;

                if (!streams || streams.length === 0) {
                    document.getElementById('weekly-schedule').innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: var(--text-muted);">No upcoming streams scheduled</p>';
                    return;
                }

                // Create a 7-day schedule
                const days = ['MON', 'TUE', 'WED', 'THU', 'FRI', 'SAT', 'SUN'];
                const dayMap = {0: 'MON', 1: 'TUE', 2: 'WED', 3: 'THU', 4: 'FRI', 5: 'SAT', 6: 'SUN'};
                const scheduleByDay = {};

                // Initialize all days as OFF
                days.forEach(day => {
                    scheduleByDay[day] = null;
                });

                // Get the next stream overall
                const now = new Date();
                const nextStream = streams.find(stream => new Date(stream.start_time) > now);
                
                if (nextStream) {
                    const startTime = new Date(nextStream.start_time);
                    const date = startTime.toLocaleDateString('en-US', { weekday: 'long' });
                    const time = startTime.toLocaleTimeString('en-US', { hour: '2-digit', minute: '2-digit', timeZoneName: 'short' });
                    const title = nextStream.title || (nextStream.category ? nextStream.category.name : 'Stream');
                    
                    document.getElementById('next-stream-title').textContent = title;
                    document.getElementById('next-stream-time').textContent = `${date} at ${time}`;
                    document.getElementById('next-stream-banner').style.display = 'block';
                }

                // Populate schedule by day of week
                streams.forEach(stream => {
                    const streamTime = new Date(stream.start_time);
                    const dayIndex = streamTime.getDay();
                    const dayName = dayMap[dayIndex === 0 ? 6 : dayIndex - 1]; // Adjust for Monday = 0
                    
                    if (!scheduleByDay[dayName]) {
                        // Format time in UTC (HH:MM UTC)
                        const hours = String(streamTime.getUTCHours()).padStart(2, '0');
                        const minutes = String(streamTime.getUTCMinutes()).padStart(2, '0');
                        const time = `${hours}:${minutes} UTC`;
                        
                        // Use category name if title is empty
                        const title = stream.title || (stream.category ? stream.category.name : 'Stream');
                        
                        scheduleByDay[dayName] = {
                            time: time,
                            title: title
                        };
                    }
                });

                // Generate HTML for 7-day schedule
                const scheduleHTML = days.map(day => {
                    const dayInfo = scheduleByDay[day];
                    if (!dayInfo) {
                        return `
                            <div class="day-card">
                                <div class="day-name">${day}</div>
                                <div class="stream-time" style="color: var(--text-muted); font-size: 1.3rem;">OFF</div>
                                <div class="stream-title">No stream scheduled</div>
                            </div>
                        `;
                    } else {
                        // Determine game logo based on title
                        let logo = 'üéÆ';
                        if (dayInfo.title.includes('Microsoft Flight Simulator') || dayInfo.title.includes('MSFS')) {
                            logo = '‚úàÔ∏è';
                        } else if (dayInfo.title.includes('X-Plane')) {
                            logo = 'üõ©Ô∏è';
                        }
                        
                        return `
                            <div class="day-card has-stream">
                                <div class="day-name">${day}</div>
                                <div class="game-logo">${logo}</div>
                                <div class="stream-time">${dayInfo.time}</div>
                                <div class="stream-title">${dayInfo.title}</div>
                            </div>
                        `;
                    }
                }).join('');

                document.getElementById('weekly-schedule').innerHTML = scheduleHTML;
            } catch (error) {
                console.error('Could not load streams:', error);
                document.getElementById('weekly-schedule').innerHTML = '<p style="grid-column: 1 / -1; text-align: center; color: var(--text-muted);"><a href="https://www.twitch.tv/' + TWITCH_CHANNEL_NAME + '/schedule" target="_blank" style="color: var(--primary); text-decoration: none;">View schedule on Twitch ‚Üí</a></p>';
            }
        }

        // Load streams on page load
        window.addEventListener('load', loadUpcomingStreams);
        // Refresh streams every 5 minutes
        setInterval(loadUpcomingStreams, 5 * 60 * 1000);
    </script>
</body>
</html>
